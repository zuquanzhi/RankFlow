# 二叉树查询功能使用指南

## 功能概述

本系统新增了基于二叉搜索树的高级查询功能，提供了高效的列表查询和排序操作。通过二叉树数据结构，能够显著提升大量数据的查询性能。

## 功能特性

### 1. 多种排序标准
- **队伍ID排序**: 按队伍标识符字典序排序
- **队伍名称排序**: 按队伍名称字典序排序
- **总分排序**: 按队伍总分数值排序
- **最后提交时间排序**: 按最后提交时间排序
- **解题数量排序**: 按已解决题目数量排序
- **准确率排序**: 按提交准确率排序

### 2. 高级查询功能
- **前N名查询**: 快速获取排名靠前的队伍
- **后N名查询**: 快速获取排名靠后的队伍
- **分数范围查询**: 查询指定分数区间内的队伍
- **名称模式匹配**: 支持通配符的队伍名称搜索
- **解题数筛选**: 根据最少解题数量筛选队伍
- **准确率筛选**: 根据最低准确率筛选队伍
- **排名查询**: 快速查询特定队伍的当前排名

### 3. 统计分析
- **平均分计算**: 所有队伍的平均分数
- **中位数计算**: 分数分布的中位数
- **数据概览**: 队伍总数、题目数量等基本统计

## 使用方法

### 1. 打开查询对话框
在主窗口中，通过以下方式打开高级查询对话框：
- 菜单栏: `查询(Q)` → `高级查询(A)`
- 快捷键: `Ctrl+F`

### 2. 选择查询类型
在查询对话框中，从"查询类型"下拉菜单中选择所需的查询类型：

#### 按标准排序
1. 选择"按标准排序"
2. 选择排序标准（队伍ID、名称、总分等）
3. 点击"执行查询"

#### 获取前/后N名队伍
1. 选择"获取前N名队伍"或"获取后N名队伍"
2. 设置队伍数量
3. 点击"执行查询"

#### 分数范围查询
1. 选择"分数范围查询"
2. 设置最低分数和最高分数
3. 点击"执行查询"

#### 按队伍名称搜索
1. 选择"按队伍名称搜索"
2. 输入搜索模式（支持通配符 `*` 和 `?`）
3. 点击"执行查询"

示例模式：
- `team*` - 匹配以"team"开头的队伍名称
- `*test*` - 匹配包含"test"的队伍名称
- `team??` - 匹配"team"后跟两个字符的队伍名称

#### 按解题数搜索
1. 选择"按解题数搜索"
2. 设置最少解题数量
3. 点击"执行查询"

#### 按准确率搜索
1. 选择"按准确率搜索"
2. 设置最低准确率（0.0-1.0）
3. 点击"执行查询"

#### 查询队伍排名
1. 选择"查询队伍排名"
2. 输入队伍ID
3. 点击"执行查询"

#### 查看统计信息
1. 选择"统计信息"
2. 点击"执行查询"
3. 查看详细的数据统计信息

### 3. 查看结果
查询结果将显示在对话框下方的表格中，包含以下信息：
- 排名
- 队伍ID
- 队伍名称
- 总分
- 解题数量
- 准确率
- 最后提交时间

### 4. 导出结果
点击"导出结果"按钮，可将查询结果保存为JSON格式文件。

## 技术实现

### 二叉搜索树算法
- **插入操作**: O(log n) 平均时间复杂度
- **查找操作**: O(log n) 平均时间复杂度
- **遍历操作**: O(n) 时间复杂度
- **范围查询**: O(log n + k) 时间复杂度（k为结果数量）

### 数据结构优势
1. **高效排序**: 中序遍历直接得到有序序列
2. **快速查找**: 二分查找特性
3. **动态更新**: 支持实时数据插入和删除
4. **内存友好**: 相比数组排序节省内存

### 查询优化
- 使用模板类支持多种数据类型
- 可配置的比较函数支持不同排序标准
- 智能重建策略，只在排序标准改变时重建树
- 备选线性查询方案，确保系统健壮性

## 性能对比

| 操作类型 | 线性搜索 | 二叉树查询 |
|---------|---------|-----------|
| 排序 | O(n log n) | O(n) (遍历) |
| 查找 | O(n) | O(log n) |
| 前K名 | O(n log n) | O(log n + k) |
| 范围查询 | O(n) | O(log n + k) |

## 注意事项

1. **数据更新**: 当队伍数据发生变化时，查询树会自动重建
2. **内存占用**: 二叉树需要额外的内存存储树结构
3. **最坏情况**: 在数据高度有序时，可能退化为链表结构
4. **查询精度**: 浮点数比较时存在精度问题，建议使用合适的精度范围

## 扩展功能

### 未来改进计划
1. **平衡二叉树**: 实现AVL或红黑树以保证O(log n)性能
2. **多字段索引**: 支持同时按多个字段排序和查询
3. **缓存机制**: 缓存常用查询结果
4. **并发支持**: 支持多线程并发查询

### 自定义查询
开发者可以通过修改`getCompareFunction`方法来添加新的排序标准，或者在`executeQuery`方法中添加新的查询逻辑。

## 故障排除

### 常见问题
1. **查询结果为空**: 检查查询条件是否过于严格
2. **性能下降**: 可能需要重建查询树或检查数据分布
3. **内存不足**: 减少同时维护的查询树数量

### 调试信息
系统会在审计日志中记录查询树的构建和使用情况，可通过"查看审计日志"功能查看详细信息。
